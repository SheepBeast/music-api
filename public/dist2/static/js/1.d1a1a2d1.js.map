{"version":3,"sources":["webpack:///src/plugins/photoBrowser.vue","webpack:///./src/plugins/photoBrowser.vue","webpack:///./src/directives/photoBrowser.js","webpack:///./src/views/home/event.vue?7f4e","webpack:///src/views/home/event.vue","webpack:///./src/views/home/event.vue","webpack:///./src/plugins/photoBrowser.vue?e063"],"names":[],"mappings":"4DAYA,4BAEA,QAEA,eACA,KACA,UAGA,uCAEA,qGACA,aAEA,yBAEA,wBACA,QACA,UAEA,2BAEA,yBACA,GACA,gBACA,2BACA,iBAEA,SACA,mBACA,MAEA,YAEA,sBACA,MAEA,mCACA,MACA,cAGA,oCACA,MAGA,QApCA,+CCtBA,wBAQA,UAMA,EACA,IAOA,OAZA,KAEA,KACA,yDCEA,CACA,SAhBA,aACA,uCACA,IAEA,YAAO,+BAAmC,YAE1C,gBACA,8BACA,uDACA,+CAAqF,+BAAM,0BAC3F,+CAA8C,SAC9C,UACA,EAEA,uBCdA,a,IAEiB,mBAFS,MAAa,SAA0B,+BAAwB,iCAAsC,YAAqB,mCAAgC,oBAAqB,qBAAuC,6BAAY,YAAwB,+BAAoB,4BAA4B,cAAkB,mBAAsB,UAAqB,qBAAY,aAAa,4CAA6C,6BAAwC,oBAAyD,0DAAyB,sCAA8B,YAAmB,qCAAgC,YAAqB,4BAAoB,OAAO,eAAmB,mBAAsB,UAAqB,+DAA4D,YAA0B,0EAAoE,gCAAgC,iBAA+B,gCAAyB,YAAqB,uCAAkC,iBAAkB,SAA2B,2BAAY,aAAa,sDAAuD,0DAA0E,mBAA2F,gFAAE,4CAA6C,wBAAmC,oBAAoD,qDAAyB,cAAI,+BAAiC,mCAAmC,IAAM,0BAA6B,UAAe,SAAc,qBAAe,YAAmB,kBAAY,aAAa,4CAA6C,yBAAoC,oBAAqD,sDAAyB,qDAA8C,YAAsC,yEAAsD,YAAoC,0EAAyD,qCAA8E,2EAAyC,YAA+B,6GAA0F,YAA0B,0BAA+B,4BAAa,IAAI,QAAyB,yBAA2C,kDAAyB,YAAoB,+DAAgF,4BAAa,IAAI,QAAyB,yBAAuC,8CAAyB,YAAoB,iEAAkF,4BAAa,IAAI,QAAyB,yBAAa,sBAAiD,+CAAyB,YAAoB,4DAAyD,qBAE58F,EACA,uFCsEA,kBAEA,+BACA,KACA,2CAGA,qCAEA,gBAGA,6CAJA,4BAOA,8BACA,qCACA,MAEA,WAlBA,+FC1EA,wBAQA,UAMA,EACA,IAOA,OAZA,KAEA,KACA,iDCbA,a,IAEiB,mBAFS,MAAa,SAA0B,+BAAwB,iBAAkB,mCAAmC,SAAmB,YAAK,gBAAmC,6BAAe,OAAQ,4BAA2C,SAA0B,wBAAK,2CAAsD,gCAA+B,yBAAgC,iBAAY,aAAa,oBAA6B,qCAA4B,gBAA6B,YAAI,OAElhB,EACA","file":"static/js/1.d1a1a2d1.js","sourcesContent":["<template>\n  <page class=\"photo-browser\" :class=\"{active}\" @transitionend=\"transitionend\">\n    <swiper @swiper:init=\"swiperInit\" @swiper:noop=\"close\" :autoplay=\"false\" :style=\"{display: overflow ? 'inline' : 'block'}\">\n      <swiper-slide v-for=\"p in urls\" :key=\"p\">\n        <img :src=\"p\" class=\"item\" draggable=\"false\" v-zoom>\n      </swiper-slide>\n    </swiper>\n  </page>\n</template>\n\n<script>\nimport { deviceInfo } from \"../assets/js/util.js\";\nexport default {\n  data() {\n    return {\n      urls: [],\n      swiper: null,\n      active: false,\n      overflow: false\n    };\n  },\n  methods: {\n    open(urls, index = 0, meta) {\n      if (!Array.isArray(urls) || urls.length === 0) {\n        return false;\n      }\n      Vue.$loadingTip.show()\n\n      let metaRatio = meta.height / meta.width,\n        self = this,\n        image = new Image()\n\n      this.overflow = metaRatio > deviceInfo.ratio;\n      \n      image.onload = function() {\n        self.urls = urls\n        self.swiper.go(index)\n        setTimeout(function() {\n          Vue.$loadingTip.hide()\n          \n          self.active = true\n          image.onload = null\n        }, 300)\n      }\n      image.src = urls[index]\n    },\n    close(e) {\n      this.active = false\n    },\n    transitionend(e) {\n      if(!this.active) {\n        this.overflow = false\n      }\n    },\n    swiperInit(vnode) {\n      this.swiper = vnode;\n    }\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/plugins/photoBrowser.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./photoBrowser.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1250f0ee\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./photoBrowser.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/photoBrowser.vue\n// module id = Sn2B\n// module chunks = 1","function photoBrowser(el, binding) {\n  if (!binding.value || !binding.value.group || !binding.value.url) {\n    return false\n  }\n  let { group, url, index, width, height } = binding.value\n\n  el.dataset.photoBrowserGroup = group\n  el.dataset.photoBrowserUrl = url\n  el.addEventListener('click', function () {\n    let urls = Object.values(document.querySelectorAll(`[data-photo-browser-group=\"${group}\"]`)).map(el => el.dataset.photoBrowserUrl);\n    Vue.$photoBrowser.open(urls, index || 0, { width, height });\n  })\n}\n\nexport default {\n  inserted: photoBrowser\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/directives/photoBrowser.js\n// module id = SnFR\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.event)?_c('page-content',{staticClass:\"events\"},_vm._l((_vm.event),function(e){return _c('section',{key:e.id,staticClass:\"event shadow-3d\"},[_c('div',{staticClass:\"side-left\"},[_c('router-link',{staticClass:\"avatar\",attrs:{\"tag\":\"div\",\"to\":{name: 'user', query: {id: e.user.userId}}}},[_c('img',{directives:[{name:\"lazyload\",rawName:\"v-lazyload\",value:({src: e.user.avatarUrl, wrapper: '#home'}),expression:\"{src: e.user.avatarUrl, wrapper: '#home'}\"}],staticClass:\"lazyload\"})])],1),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('card',[_c('card-content',{staticClass:\"header\"},[_c('router-link',{attrs:{\"tag\":\"span\",\"to\":{name: 'user', query: {id: e.user.userId}}}},[_vm._v(_vm._s(e.user.nickname))]),_vm._v(\" \"),_c('small',{staticClass:\"action-time\"},[_vm._v(_vm._s(e.date))])],1),_vm._v(\" \"),_c('card-media',[_c('p',{staticClass:\"message\",domProps:{\"innerHTML\":_vm._s(e.message)}}),_vm._v(\" \"),_c('grid',{staticClass:\"gutter\"},_vm._l((e.picsUrl),function(p,i){return _c('cell',{key:p.id,attrs:{\"span\":33}},[_c('img',{directives:[{name:\"photo-browser\",rawName:\"v-photo-browser\",value:({group: e.id, index: i, url: p.originUrl, width: p.width, height: p.height}),expression:\"{group: e.id, index: i, url: p.originUrl, width: p.width, height: p.height}\"},{name:\"lazyload\",rawName:\"v-lazyload\",value:({src: p.squareUrl, wrapper: '#home'}),expression:\"{src: p.squareUrl, wrapper: '#home'}\"}],staticClass:\"lazyload\"})])})),_vm._v(\" \"),_c('router-link',{staticClass:\"toolbar music\",attrs:{\"to\":{name: 'musicPlayer', query: {id: e.song.id}},\"tag\":\"div\"}},[_c('avatar',{staticClass:\"rect\"},[_c('img',{directives:[{name:\"lazyload\",rawName:\"v-lazyload\",value:({src: e.song.cover, wrapper: '#home'}),expression:\"{src: e.song.cover, wrapper: '#home'}\"}],staticClass:\"lazyload\"})]),_vm._v(\" \"),_c('toolbar-inner',[_c('div',{staticClass:\"primary-title f-elpsl-1\"},[_vm._v(_vm._s(e.song.name))]),_vm._v(\" \"),_c('div',{staticClass:\"third-title f-elpsl-1\"},[_vm._v(_vm._s(e.song.arts))])]),_vm._v(\" \"),_c('icon',{staticClass:\"toolbar-icon icon-play\",attrs:{\"ligature\":\"play_circle_outline\"}})],1),_vm._v(\" \"),(e.reason)?_c('small',{staticClass:\"recommend-reason\"},[_vm._v(\"—— \"+_vm._s(e.reason))]):_vm._e()],1),_vm._v(\" \"),_c('card-actions',[_c('grid',{staticClass:\"text-center\"},[_c('cell',{attrs:{\"span\":33}},[_c('span',{on:{\"click\":_vm.undeveloped}},[_c('icon',{attrs:{\"ligature\":\"thumb_up\"}}),_vm._v(\" \"),_c('span',{staticClass:\"count\"},[_vm._v(_vm._s(e.likedCount))])],1)]),_vm._v(\" \"),_c('cell',{attrs:{\"span\":33}},[_c('span',{on:{\"click\":_vm.undeveloped}},[_c('icon',{attrs:{\"ligature\":\"chat\"}}),_vm._v(\" \"),_c('span',{staticClass:\"count\"},[_vm._v(_vm._s(e.commentCount))])],1)]),_vm._v(\" \"),_c('cell',{attrs:{\"span\":33}},[_c('span',{on:{\"click\":_vm.undeveloped}},[_c('icon',{staticClass:\"reverse\",attrs:{\"ligature\":\"reply\"}}),_vm._v(\" \"),_c('span',{staticClass:\"count\"},[_vm._v(_vm._s(e.shareCount))])],1)])],1)],1)],1)],1)])})):_c('loading-page')}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e4c33118\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/home/event.vue\n// module id = Sthp\n// module chunks = 1","<template>\n  <page-content class=\"events\" v-if=\"event\">\n    <section class=\"event shadow-3d\" v-for=\"e in event\" :key=\"e.id\">\n      <div class=\"side-left\">\n        <router-link class=\"avatar\" tag=\"div\" :to=\"{name: 'user', query: {id: e.user.userId}}\">\n          <img class=\"lazyload\" v-lazyload=\"{src: e.user.avatarUrl, wrapper: '#home'}\">\n        </router-link>\n      </div>\n      <div class=\"main\">\n        <card>\n          <card-content class=\"header\">\n            <router-link tag=\"span\" :to=\"{name: 'user', query: {id: e.user.userId}}\">{{e.user.nickname}}</router-link>\n            <small class=\"action-time\">{{e.date}}</small>\n          </card-content>\n          <card-media>\n            <p class=\"message\" v-html=\"e.message\"></p>\n            <grid class=\"gutter\">\n              <cell :span=\"33\" v-for=\"(p, i) in e.picsUrl\" :key=\"p.id\">\n                <img class=\"lazyload\" v-photo-browser=\"{group: e.id, index: i, url: p.originUrl, width: p.width, height: p.height}\" v-lazyload=\"{src: p.squareUrl, wrapper: '#home'}\">\n              </cell>\n            </grid>\n\n            <router-link :to=\"{name: 'musicPlayer', query: {id: e.song.id}}\" tag=\"div\" class=\"toolbar music\">\n              <avatar class=\"rect\">\n                <img class=\"lazyload\" v-lazyload=\"{src: e.song.cover, wrapper: '#home'}\">\n              </avatar>\n              <toolbar-inner>\n                <div class=\"primary-title f-elpsl-1\">{{e.song.name}}</div>\n                <div class=\"third-title f-elpsl-1\">{{e.song.arts}}</div>\n              </toolbar-inner>\n              <icon ligature=\"play_circle_outline\" class=\"toolbar-icon icon-play\"></icon>\n            </router-link>\n\n            <small class=\"recommend-reason\" v-if=\"e.reason\">—— {{e.reason}}</small>\n          </card-media>\n          <card-actions>\n            <grid class=\"text-center\">\n              <cell :span=\"33\">\n                <span @click=\"undeveloped\">\n                  <icon ligature=\"thumb_up\"></icon>\n                  <span class=\"count\">{{e.likedCount}}</span>\n                </span>\n              </cell>\n              <cell :span=\"33\">\n                <span @click=\"undeveloped\">\n                  <icon ligature=\"chat\"></icon>\n                  <span class=\"count\">{{e.commentCount}}</span>\n                </span>\n              </cell>\n              <cell :span=\"33\">\n                <span @click=\"undeveloped\">\n                  <icon ligature=\"reply\" class=\"reverse\"></icon>\n                  <span class=\"count\">{{e.shareCount}}</span>\n                </span>\n              </cell>\n            </grid>\n          </card-actions>\n        </card>\n      </div>\n    </section>\n  </page-content>\n  <loading-page v-else></loading-page>\n</template>\n<script>\nimport { createService } from \"../../assets/js/util.js\";\n\n/**\n * 由于图片浏览器只在当前页面使用，所以该页面才注册photoBrowser服务，并注册局部指令\n * 该页面为异步加载的页面，所以也减少首页加载时间\n */\nimport PhotoBrowserPlugin from \"../../plugins/photoBrowser.vue\";\nimport ProtoBrowserDirective from \"../../directives/photoBrowser.js\";\n\nexport default {\n  name: \"event\",\n  beforeCreate() {\n    if (!Vue.$photoBrowser) {\n      createService(\"$photoBrowser\", PhotoBrowserPlugin);\n    }\n  },\n  methods: {\n    undeveloped() {\n      this.$tip.show(\"该功能暂未开发\");\n    }\n  },\n  directives: {\n    photoBrowser: ProtoBrowserDirective\n  },\n  computed: Vuex.mapGetters(\"event\", [\"event\"]),\n  mounted() {\n    this.$lazyload();\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/home/event.vue","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./event.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e4c33118\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./event.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/home/event.vue\n// module id = oP7G\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',{staticClass:\"photo-browser\",class:{active: _vm.active},on:{\"transitionend\":_vm.transitionend}},[_c('swiper',{style:({display: _vm.overflow ? 'inline' : 'block'}),attrs:{\"autoplay\":false},on:{\"swiper:init\":_vm.swiperInit,\"swiper:noop\":_vm.close}},_vm._l((_vm.urls),function(p){return _c('swiper-slide',{key:p},[_c('img',{directives:[{name:\"zoom\",rawName:\"v-zoom\"}],staticClass:\"item\",attrs:{\"src\":p,\"draggable\":\"false\"}})])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1250f0ee\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/plugins/photoBrowser.vue\n// module id = rv6g\n// module chunks = 1"],"sourceRoot":""}
{"version":3,"sources":["webpack:///static/js/3.5efd9c8c1c5e3d88ab1a.js","webpack:///src/views/search/search.vue","webpack:///./src/views/search/search.vue?57df","webpack:///./src/views/search/search.vue"],"names":["webpackJsonp","AvgG","module","__webpack_exports__","__webpack_require__","songs","resolve","e","then","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","this","catch","oe","name","data","keywords","step","sidenav","searchbar","timer","tags","methods","searchbarInit","vnode","input","setStep","clearTimeout","$store","commit","setTimeout","self","dispatch","clear","cancel","removeHistory","remove","search","type","id","$tip","show","$refs","value","route","query","$router","push","limit","quicksearch","tag","viewChange","index","currentView","tabs","en","back","computed","Vuex","mapGetters","components","D+5O","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","fixed","staticStyle","font-size","color","ligature","nativeOn","click","$event","_v","placeholder","on","searchbar:init","searchbar:submit","searchbar:input","searchbar:cancel","class","hidden","directives","rawName","expression","_l","i","key","_s","h","sg","alias","artist","staticRenderFns","esExports","GSpQ","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_search_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4c9e2052_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_search_vue__","normalizeComponent","Component"],"mappings":"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","file":"static/js/3.5efd9c8c1c5e3d88ab1a.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ \"AvgG\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar songs = function songs(resolve) {\n  __webpack_require__.e/* require */(10).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(\"p04V\")]; (resolve.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this)).catch(__webpack_require__.oe);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: \"search\",\n  data: function data() {\n    return {\n      keywords: \"\",\n      step: \"history\", // 'history', 'suggest', 'result'\n      sidenav: null,\n      searchbar: null,\n      timer: null,\n\n      tags: [\"孙燕姿\", \"RADWINPS\", \"理想三巡\", \"金玟岐\", \"Despacito铃声(Marimba Remix)\", \"我们不一样\", \"白夜\", \"追光者\", \"李荣浩\", \"许嵩\"]\n    };\n  },\n\n  methods: {\n    searchbarInit: function searchbarInit(vnode) {\n      this.searchbar = vnode;\n    },\n    input: function input(keywords) {\n      this.keywords = keywords;\n      this.setStep(keywords ? \"suggest\" : \"history\");\n      clearTimeout(this.timer);\n      this.$store.commit(\"search/clearSuggest\");\n      this.timer = setTimeout(function (self) {\n        if (keywords) {\n          self.$store.dispatch(\"search/getSuggest\", { keywords: keywords });\n        }\n      }, 500, this);\n    },\n    clear: function clear() {\n      this.keywords = \"\";\n      this.$store.commit(\"search/clearSuggest\");\n    },\n    setStep: function setStep(step) {\n      this.step = step;\n    },\n    cancel: function cancel() {\n      this.clear();\n      this.setStep(\"history\");\n    },\n    removeHistory: function removeHistory(keywords) {\n      this.$store.commit(\"search/setHistory\", { keywords: keywords, remove: true });\n    },\n    search: function search(type, id) {\n      if (!this.keywords) {\n        this.$tip.show(\"请输入搜索关键词\");\n        return false;\n      }\n      this.searchbar.$refs.search.value = \"\";\n      this.$store.commit(\"search/setHistory\", { keywords: this.keywords });\n\n      // 跳转相关页面\n      if (type && id) {\n        var route = void 0;\n        switch (type) {\n          case 1:\n            route = {\n              name: \"musicPlayer\"\n            };\n            break;\n          case 10:\n            route = {\n              name: \"album\"\n            };\n            break;\n          case 100:\n            route = {\n              name: \"artist\"\n            };\n            break;\n          case 1000:\n            route = {\n              name: \"playlist\"\n            };\n            break;\n        }\n        route.query = { id: id };\n        this.$router.push(route);\n      } else {\n        // 搜索结果\n        this.$store.commit(\"search/resetResult\");\n        this.$store.dispatch(\"search/getResult\", {\n          keywords: this.keywords,\n          type: 1,\n          limit: 20\n        });\n        this.setStep(\"result\");\n        this.$store.dispatch(\"search/getMultiResult\", {\n          keywords: this.keywords\n        });\n        this.clear();\n      }\n    },\n    quicksearch: function quicksearch(tag) {\n      if (tag) {\n        this.keywords = tag;\n      }\n      this.search();\n    },\n    viewChange: function viewChange(index) {\n      this.currentView = this.tabs[index].en;\n    },\n    back: function back() {\n      this.cancel();\n      this.$router.back();\n    }\n  },\n  computed: Vuex.mapGetters(\"search\", [\"suggest\", \"history\"]),\n  components: {\n    songs: songs\n  }\n});\n\n/***/ }),\n\n/***/ \"D+5O\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',{staticClass:\"search\"},[_c('toolbar',{attrs:{\"fixed\":\"\"}},[_c('icon',{staticStyle:{\"font-size\":\"26px\",\"color\":\"#fff\"},attrs:{\"ligature\":\"navigate_before\"},nativeOn:{\"click\":function($event){_vm.back($event)}}}),_vm._v(\" \"),_c('toolbar-inner',[_c('searchbar',{attrs:{\"placeholder\":\"搜索歌曲、歌手、专辑\"},on:{\"searchbar:init\":_vm.searchbarInit,\"searchbar:submit\":_vm.quicksearch,\"searchbar:input\":_vm.input,\"searchbar:cancel\":_vm.cancel}})],1),_vm._v(\" \"),_c('span',{staticClass:\"cancel\",class:{'hidden': _vm.step == 'history'},on:{\"click\":function($event){_vm.setStep('history')}}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 'history'),expression:\"step === 'history'\"}]},[_c('section',{staticClass:\"hot-search\"},[_c('h3',[_vm._v(\"大家都在搜\")]),_vm._v(\" \"),_c('div',_vm._l((_vm.tags),function(tag,i){return _c('span',{key:i,staticClass:\"search-tag\",on:{\"click\":function($event){_vm.quicksearch(tag)}}},[_vm._v(\"\\n          \"+_vm._s(tag)+\"\\n        \")])}))]),_vm._v(\" \"),_c('section',{staticClass:\"search-history\"},[_c('list',_vm._l((_vm.history),function(h,i){return _c('list-item',{key:i},[_c('icon',{staticClass:\"icon-history\",attrs:{\"ligature\":\"history\"}}),_vm._v(\" \"),_c('list-item-holder',{staticClass:\"dense\"},[_c('list-item-inner',{nativeOn:{\"click\":function($event){_vm.quicksearch(h.keywords)}}},[_c('span',[_vm._v(_vm._s(h.keywords))])]),_vm._v(\" \"),_c('icon',{attrs:{\"ligature\":\"close\"},nativeOn:{\"click\":function($event){_vm.removeHistory(h.keywords)}}})],1)],1)}))],1)]),_vm._v(\" \"),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 'suggest'),expression:\"step === 'suggest'\"}],staticClass:\"search-suggest\"},[_c('list',[_c('list-item',[_c('list-item-holder',{staticClass:\"dense\",nativeOn:{\"click\":function($event){_vm.quicksearch()}}},[_c('list-item-inner',[_c('small',{staticClass:\"type\"},[_vm._v(\"搜索\")]),_vm._v(_vm._s(_vm.keywords)+\"\\n          \")])],1)],1),_vm._v(\" \"),_vm._l((_vm.suggest),function(sg){return _c('list-item',{key:sg.id},[_c('list-item-holder',{staticClass:\"dense\",nativeOn:{\"click\":function($event){_vm.search(sg.type, sg.id)}}},[_c('list-item-inner',[_c('small',{staticClass:\"type\"},[_vm._v(_vm._s(sg.alias))]),_vm._v(_vm._s(sg.name)+_vm._s(sg.artist ? ' - ' + sg.artist : '')+\"\\n          \")])],1)],1)})],2)],1),_vm._v(\" \"),_c('section',{staticClass:\"search-result\",class:{'hidden': _vm.step !== 'result'}},[_c('songs',{tag:\"component\"})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"GSpQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_search_vue__ = __webpack_require__(\"AvgG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4c9e2052_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_search_vue__ = __webpack_require__(\"D+5O\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_search_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4c9e2052_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_search_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.5efd9c8c1c5e3d88ab1a.js","<template>\n  <page class=\"search\">\n    <toolbar fixed>\n      <icon ligature=\"navigate_before\" style=\"font-size: 26px; color: #fff;\" @click.native=\"back\"></icon>\n      <toolbar-inner>\n        <searchbar @searchbar:init=\"searchbarInit\" @searchbar:submit=\"quicksearch\" placeholder=\"搜索歌曲、歌手、专辑\" @searchbar:input=\"input\" @searchbar:cancel=\"cancel\"></searchbar>\n      </toolbar-inner>\n      <span @click=\"setStep('history')\" class=\"cancel\" :class=\"{'hidden': step == 'history'}\">取消</span>\n    </toolbar>\n\n    <div v-show=\"step === 'history'\">\n      <section class=\"hot-search\">\n        <h3>大家都在搜</h3>\n        <div>\n          <span v-for=\"(tag, i) in tags\" :key=\"i\" class=\"search-tag\" @click=\"quicksearch(tag)\">\n            {{tag}}\n          </span>\n        </div>\n      </section>\n\n      <section class=\"search-history\">\n        <list>\n          <list-item v-for=\"(h, i) in history\" :key=\"i\">\n            <icon class=\"icon-history\" ligature=\"history\"></icon>\n            <list-item-holder class=\"dense\">\n              <list-item-inner @click.native=\"quicksearch(h.keywords)\">\n                <span>{{h.keywords}}</span>\n              </list-item-inner>\n                <icon ligature=\"close\" @click.native=\"removeHistory(h.keywords)\"></icon>\n            </list-item-holder>\n          </list-item>\n        </list>\n      </section>\n    </div>\n\n    <section class=\"search-suggest\" v-show=\"step === 'suggest'\">\n      <list>\n        <list-item>\n          <list-item-holder class=\"dense\" @click.native=\"quicksearch()\">\n            <list-item-inner>\n              <small class=\"type\">搜索</small>{{keywords}}\n            </list-item-inner>\n          </list-item-holder>\n        </list-item>\n\n        <list-item v-for=\"sg in suggest\" :key=\"sg.id\">\n          <list-item-holder class=\"dense\" @click.native=\"search(sg.type, sg.id)\">\n            <list-item-inner>\n              <small class=\"type\">{{sg.alias}}</small>{{sg.name}}{{ sg.artist ? ' - ' + sg.artist : '' }}\n            </list-item-inner>\n          </list-item-holder>\n        </list-item>\n      </list>\n    </section>\n\n    <section class=\"search-result\" :class=\"{'hidden': step !== 'result'}\">\n      <component :is=\"'songs'\"></component>\n    </section>\n  </page>\n</template>\n\n<script>\nconst songs = resolve => {\n  require([\"./songs\"], resolve);\n};\n\nexport default {\n  name: \"search\",\n  data() {\n    return {\n      keywords: \"\",\n      step: \"history\", // 'history', 'suggest', 'result'\n      sidenav: null,\n      searchbar: null,\n      timer: null,\n\n      tags: [\n        \"孙燕姿\",\n        \"RADWINPS\",\n        \"理想三巡\",\n        \"金玟岐\",\n        \"Despacito铃声(Marimba Remix)\",\n        \"我们不一样\",\n        \"白夜\",\n        \"追光者\",\n        \"李荣浩\",\n        \"许嵩\"\n      ]\n    };\n  },\n  methods: {\n    searchbarInit(vnode) {\n      this.searchbar = vnode;\n    },\n    input(keywords) {\n      this.keywords = keywords;\n      this.setStep(keywords ? \"suggest\" : \"history\");\n      clearTimeout(this.timer);\n      this.$store.commit(\"search/clearSuggest\");\n      this.timer = setTimeout(\n        self => {\n          if (keywords) {\n            self.$store.dispatch(\"search/getSuggest\", { keywords });\n          }\n        },\n        500,\n        this\n      );\n    },\n    clear() {\n      this.keywords = \"\";\n      this.$store.commit(\"search/clearSuggest\");\n    },\n    setStep(step) {\n      this.step = step;\n    },\n    cancel() {\n      this.clear();\n      this.setStep(\"history\");\n    },\n    removeHistory(keywords) {\n      this.$store.commit(\"search/setHistory\", { keywords, remove: true });\n    },\n    search(type, id) {\n      if (!this.keywords) {\n        this.$tip.show(\"请输入搜索关键词\");\n        return false;\n      }\n      this.searchbar.$refs.search.value = \"\";\n      this.$store.commit(\"search/setHistory\", { keywords: this.keywords });\n\n      // 跳转相关页面\n      if (type && id) {\n        let route;\n        switch (type) {\n          case 1:\n            route = {\n              name: \"musicPlayer\"\n            };\n            break;\n          case 10:\n            route = {\n              name: \"album\"\n            };\n            break;\n          case 100:\n            route = {\n              name: \"artist\"\n            };\n            break;\n          case 1000:\n            route = {\n              name: \"playlist\"\n            };\n            break;\n        }\n        route.query = { id };\n        this.$router.push(route);\n      } else {\n        // 搜索结果\n        this.$store.commit(\"search/resetResult\");\n        this.$store.dispatch(\"search/getResult\", {\n          keywords: this.keywords,\n          type: 1,\n          limit: 20\n        });\n        this.setStep(\"result\");\n        this.$store.dispatch(\"search/getMultiResult\", {\n          keywords: this.keywords\n        });\n        this.clear();\n      }\n    },\n    quicksearch(tag) {\n      if (tag) {\n        this.keywords = tag;\n      }\n      this.search();\n    },\n    viewChange(index) {\n      this.currentView = this.tabs[index].en;\n    },\n    back() {\n      this.cancel();\n      this.$router.back();\n    }\n  },\n  computed: Vuex.mapGetters(\"search\", [\"suggest\", \"history\"]),\n  components: {\n    songs\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/search/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',{staticClass:\"search\"},[_c('toolbar',{attrs:{\"fixed\":\"\"}},[_c('icon',{staticStyle:{\"font-size\":\"26px\",\"color\":\"#fff\"},attrs:{\"ligature\":\"navigate_before\"},nativeOn:{\"click\":function($event){_vm.back($event)}}}),_vm._v(\" \"),_c('toolbar-inner',[_c('searchbar',{attrs:{\"placeholder\":\"搜索歌曲、歌手、专辑\"},on:{\"searchbar:init\":_vm.searchbarInit,\"searchbar:submit\":_vm.quicksearch,\"searchbar:input\":_vm.input,\"searchbar:cancel\":_vm.cancel}})],1),_vm._v(\" \"),_c('span',{staticClass:\"cancel\",class:{'hidden': _vm.step == 'history'},on:{\"click\":function($event){_vm.setStep('history')}}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 'history'),expression:\"step === 'history'\"}]},[_c('section',{staticClass:\"hot-search\"},[_c('h3',[_vm._v(\"大家都在搜\")]),_vm._v(\" \"),_c('div',_vm._l((_vm.tags),function(tag,i){return _c('span',{key:i,staticClass:\"search-tag\",on:{\"click\":function($event){_vm.quicksearch(tag)}}},[_vm._v(\"\\n          \"+_vm._s(tag)+\"\\n        \")])}))]),_vm._v(\" \"),_c('section',{staticClass:\"search-history\"},[_c('list',_vm._l((_vm.history),function(h,i){return _c('list-item',{key:i},[_c('icon',{staticClass:\"icon-history\",attrs:{\"ligature\":\"history\"}}),_vm._v(\" \"),_c('list-item-holder',{staticClass:\"dense\"},[_c('list-item-inner',{nativeOn:{\"click\":function($event){_vm.quicksearch(h.keywords)}}},[_c('span',[_vm._v(_vm._s(h.keywords))])]),_vm._v(\" \"),_c('icon',{attrs:{\"ligature\":\"close\"},nativeOn:{\"click\":function($event){_vm.removeHistory(h.keywords)}}})],1)],1)}))],1)]),_vm._v(\" \"),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 'suggest'),expression:\"step === 'suggest'\"}],staticClass:\"search-suggest\"},[_c('list',[_c('list-item',[_c('list-item-holder',{staticClass:\"dense\",nativeOn:{\"click\":function($event){_vm.quicksearch()}}},[_c('list-item-inner',[_c('small',{staticClass:\"type\"},[_vm._v(\"搜索\")]),_vm._v(_vm._s(_vm.keywords)+\"\\n          \")])],1)],1),_vm._v(\" \"),_vm._l((_vm.suggest),function(sg){return _c('list-item',{key:sg.id},[_c('list-item-holder',{staticClass:\"dense\",nativeOn:{\"click\":function($event){_vm.search(sg.type, sg.id)}}},[_c('list-item-inner',[_c('small',{staticClass:\"type\"},[_vm._v(_vm._s(sg.alias))]),_vm._v(_vm._s(sg.name)+_vm._s(sg.artist ? ' - ' + sg.artist : '')+\"\\n          \")])],1)],1)})],2)],1),_vm._v(\" \"),_c('section',{staticClass:\"search-result\",class:{'hidden': _vm.step !== 'result'}},[_c('songs',{tag:\"component\"})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4c9e2052\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/search/search.vue\n// module id = D+5O\n// module chunks = 3","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c9e2052\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/search/search.vue\n// module id = GSpQ\n// module chunks = 3"],"sourceRoot":""}
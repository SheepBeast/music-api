{"version":3,"sources":["webpack:///src/views/search/search.vue","webpack:///./src/views/search/search.vue","webpack:///./src/views/search/search.vue?9e00"],"names":[],"mappings":"uCA8DA,uBAMA,wBACA,iBAEA,QACA,kBACA,eACA,WAEA,KAcA,2QAEA,MAEA,8BACA,MACA,oCACA,6BACA,0BACA,wDAGA,2CAGA,YALA,EAMA,IAGA,uBACA,eACA,sBAEA,2CACA,MAEA,yBACA,MACA,qBAEA,qCACA,oDAEA,iCACA,UACA,SAGA,sBAFA,4FAGA,yDAGA,gBACA,IAEA,GACA,cAIA,eACA,eAIA,SACA,gBAKA,0BAKA,4BACA,mBACA,OAEA,yBACA,6EAEA,cACA,QAEA,kBACA,sEAGA,gBAGA,gCAEA,UAEA,iBAEA,gCACA,+BAEA,mBACA,MACA,sBAGA,MAhGA,4BAiGA,2CAGA,CAFA,iBA9HA,2CACA,wCAEA,gGClEA,wBAQA,UAMA,EACA,IAOA,OAZA,KAEA,KACA,iDCbA,a,IAEiB,mBAFS,MAAa,SAA0B,+BAAwB,iBAAkB,YAAqB,wBAAmC,6BAA4D,8CAAqC,6CAAW,kBAAyB,SAAmB,iDAAoF,uFAAK,iHAAiI,kCAA6B,4BAA4B,OAAgC,uBAAK,iBAAyB,oBAAyB,mDAA2C,aAAa,iEAA8F,sCAAgB,YAAyB,4GAAoF,iBAAkB,mCAAmC,iBAAyB,gBAAuB,gDAAoD,6BAA+B,YAA6B,yDAA+C,sBAA6B,kBAAa,2BAAwD,6DAAqC,YAAoB,+BAAwB,UAAU,iBAAyB,yBAA8B,8DAA6F,mCAAW,iBAAyB,2BAAgC,YAAU,iCAAmC,aAAa,iEAA4F,mCAA+B,kEAAoD,8BAA8B,iBAAyB,eAAoB,qCAAoC,YAAmB,qHAAqH,sBAAuB,MAAU,2BAAyB,8BAA8B,iBAAyB,qBAA6B,qCAAoC,YAAmB,2GAAyH,kCAAoC,mCAAmC,OAAiC,gCAAc,IAAgB,qBAEr/E,EACA","file":"static/js/6.ae7a2ee1937385f25f39.js","sourcesContent":["<template>\n  <page class=\"search\">\n    <toolbar fixed>\n      <icon ligature=\"navigate_before\" style=\"font-size: 26px; color: #fff;\" @click.native=\"back\"></icon>\n      <toolbar-inner>\n        <searchbar @searchbar:init=\"searchbarInit\" @searchbar:submit=\"quicksearch\" placeholder=\"搜索歌曲、歌手、专辑\" @searchbar:input=\"input\" @searchbar:cancel=\"cancel\"></searchbar>\n      </toolbar-inner>\n      <span @click=\"setStep('history')\" class=\"cancel\" :class=\"{'hidden': step == 'history'}\">取消</span>\n    </toolbar>\n\n    <div v-show=\"step === 'history'\">\n      <section class=\"hot-search\">\n        <h3>大家都在搜</h3>\n        <div>\n          <span v-for=\"(tag, i) in tags\" :key=\"i\" class=\"search-tag\" @click=\"quicksearch(tag)\">\n            {{tag}}\n          </span>\n        </div>\n      </section>\n\n      <section class=\"search-history\">\n        <list>\n          <list-item v-for=\"(h, i) in history\" :key=\"i\">\n            <icon class=\"icon-history\" ligature=\"history\"></icon>\n            <list-item-holder class=\"dense\">\n              <list-item-inner @click.native=\"quicksearch(h.keywords)\">\n                <span>{{h.keywords}}</span>\n              </list-item-inner>\n                <icon ligature=\"close\" @click.native=\"removeHistory(h.keywords)\"></icon>\n            </list-item-holder>\n          </list-item>\n        </list>\n      </section>\n    </div>\n\n    <section class=\"search-suggest\" v-show=\"step === 'suggest'\">\n      <list>\n        <list-item>\n          <list-item-holder class=\"dense\" @click.native=\"quicksearch()\">\n            <list-item-inner>\n              <small class=\"type\">搜索</small>{{keywords}}\n            </list-item-inner>\n          </list-item-holder>\n        </list-item>\n\n        <list-item v-for=\"sg in suggest\" :key=\"sg.id\">\n          <list-item-holder class=\"dense\" @click.native=\"search(sg.type, sg.id)\">\n            <list-item-inner>\n              <small class=\"type\">{{sg.alias}}</small>{{sg.name}}{{ sg.artist ? ' - ' + sg.artist : '' }}\n            </list-item-inner>\n          </list-item-holder>\n        </list-item>\n      </list>\n    </section>\n\n    <section class=\"search-result\" :class=\"{'hidden': step !== 'result'}\">\n      <component :is=\"'songs'\"></component>\n    </section>\n  </page>\n</template>\n\n<script>\nconst songs = resolve => {\n  require([\"./songs\"], resolve);\n};\n\nexport default {\n  name: \"search\",\n  data() {\n    return {\n      keywords: \"\",\n      step: \"history\", // 'history', 'suggest', 'result'\n      sidenav: null,\n      searchbar: null,\n      timer: null,\n\n      tags: [\n        \"孙燕姿\",\n        \"RADWINPS\",\n        \"理想三巡\",\n        \"金玟岐\",\n        \"Despacito铃声(Marimba Remix)\",\n        \"我们不一样\",\n        \"白夜\",\n        \"追光者\",\n        \"李荣浩\",\n        \"许嵩\"\n      ]\n    };\n  },\n  methods: {\n    searchbarInit(vnode) {\n      this.searchbar = vnode;\n    },\n    input(keywords) {\n      this.keywords = keywords;\n      this.setStep(keywords ? \"suggest\" : \"history\");\n      clearTimeout(this.timer);\n      this.$store.commit(\"search/clearSuggest\");\n      this.timer = setTimeout(\n        self => {\n          if (keywords) {\n            self.$store.dispatch(\"search/getSuggest\", { keywords });\n          }\n        },\n        500,\n        this\n      );\n    },\n    clear() {\n      this.keywords = \"\";\n      this.$store.commit(\"search/clearSuggest\");\n    },\n    setStep(step) {\n      this.step = step;\n    },\n    cancel() {\n      this.clear();\n      this.setStep(\"history\");\n    },\n    removeHistory(keywords) {\n      this.$store.commit(\"search/setHistory\", { keywords, remove: true });\n    },\n    search(type, id) {\n      if (!this.keywords) {\n        this.$tip.show(\"请输入搜索关键词\");\n        return false;\n      }\n      this.searchbar.$refs.search.value = \"\";\n      this.$store.commit(\"search/setHistory\", { keywords: this.keywords });\n\n      // 跳转相关页面\n      if (type && id) {\n        let route;\n        switch (type) {\n          case 1:\n            route = {\n              name: \"musicPlayer\"\n            };\n            break;\n          case 10:\n            route = {\n              name: \"album\"\n            };\n            break;\n          case 100:\n            route = {\n              name: \"artist\"\n            };\n            break;\n          case 1000:\n            route = {\n              name: \"playlist\"\n            };\n            break;\n        }\n        route.query = { id };\n        this.$router.push(route);\n      } else {\n        // 搜索结果\n        this.$store.commit(\"search/resetResult\");\n        this.$store.dispatch(\"search/getResult\", {\n          keywords: this.keywords,\n          type: 1,\n          limit: 20\n        });\n        this.setStep(\"result\");\n        this.$store.dispatch(\"search/getMultiResult\", {\n          keywords: this.keywords\n        });\n        this.clear();\n      }\n    },\n    quicksearch(tag) {\n      if (tag) {\n        this.keywords = tag;\n      }\n      this.search();\n    },\n    viewChange(index) {\n      this.currentView = this.tabs[index].en;\n    },\n    back() {\n      this.cancel();\n      this.$router.back();\n    }\n  },\n  computed: Vuex.mapGetters(\"search\", [\"suggest\", \"history\"]),\n  components: {\n    songs\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/views/search/search.vue","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4c9e2052\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/search/search.vue\n// module id = GSpQ\n// module chunks = 6","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('page',{staticClass:\"search\"},[_c('toolbar',{attrs:{\"fixed\":\"\"}},[_c('icon',{staticStyle:{\"font-size\":\"26px\",\"color\":\"#fff\"},attrs:{\"ligature\":\"navigate_before\"},nativeOn:{\"click\":function($event){_vm.back($event)}}}),_vm._v(\" \"),_c('toolbar-inner',[_c('searchbar',{attrs:{\"placeholder\":\"搜索歌曲、歌手、专辑\"},on:{\"searchbar:init\":_vm.searchbarInit,\"searchbar:submit\":_vm.quicksearch,\"searchbar:input\":_vm.input,\"searchbar:cancel\":_vm.cancel}})],1),_vm._v(\" \"),_c('span',{staticClass:\"cancel\",class:{'hidden': _vm.step == 'history'},on:{\"click\":function($event){_vm.setStep('history')}}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 'history'),expression:\"step === 'history'\"}]},[_c('section',{staticClass:\"hot-search\"},[_c('h3',[_vm._v(\"大家都在搜\")]),_vm._v(\" \"),_c('div',_vm._l((_vm.tags),function(tag,i){return _c('span',{key:i,staticClass:\"search-tag\",on:{\"click\":function($event){_vm.quicksearch(tag)}}},[_vm._v(\"\\n          \"+_vm._s(tag)+\"\\n        \")])}))]),_vm._v(\" \"),_c('section',{staticClass:\"search-history\"},[_c('list',_vm._l((_vm.history),function(h,i){return _c('list-item',{key:i},[_c('icon',{staticClass:\"icon-history\",attrs:{\"ligature\":\"history\"}}),_vm._v(\" \"),_c('list-item-holder',{staticClass:\"dense\"},[_c('list-item-inner',{nativeOn:{\"click\":function($event){_vm.quicksearch(h.keywords)}}},[_c('span',[_vm._v(_vm._s(h.keywords))])]),_vm._v(\" \"),_c('icon',{attrs:{\"ligature\":\"close\"},nativeOn:{\"click\":function($event){_vm.removeHistory(h.keywords)}}})],1)],1)}))],1)]),_vm._v(\" \"),_c('section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.step === 'suggest'),expression:\"step === 'suggest'\"}],staticClass:\"search-suggest\"},[_c('list',[_c('list-item',[_c('list-item-holder',{staticClass:\"dense\",nativeOn:{\"click\":function($event){_vm.quicksearch()}}},[_c('list-item-inner',[_c('small',{staticClass:\"type\"},[_vm._v(\"搜索\")]),_vm._v(_vm._s(_vm.keywords)+\"\\n          \")])],1)],1),_vm._v(\" \"),_vm._l((_vm.suggest),function(sg){return _c('list-item',{key:sg.id},[_c('list-item-holder',{staticClass:\"dense\",nativeOn:{\"click\":function($event){_vm.search(sg.type, sg.id)}}},[_c('list-item-inner',[_c('small',{staticClass:\"type\"},[_vm._v(_vm._s(sg.alias))]),_vm._v(_vm._s(sg.name)+_vm._s(sg.artist ? ' - ' + sg.artist : '')+\"\\n          \")])],1)],1)})],2)],1),_vm._v(\" \"),_c('section',{staticClass:\"search-result\",class:{'hidden': _vm.step !== 'result'}},[_c('songs',{tag:\"component\"})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4c9e2052\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/search/search.vue\n// module id = hO69\n// module chunks = 6"],"sourceRoot":""}
webpackJsonp([6],{AvgG:function(a,b,c){"use strict";b.a={name:"search",data:function(){return{keywords:"",step:"history",sidenav:null,searchbar:null,timer:null,tags:["\u5B59\u71D5\u59FF","RADWINPS","\u7406\u60F3\u4E09\u5DE1","\u91D1\u739F\u5C90","Despacito\u94C3\u58F0(Marimba Remix)","\u6211\u4EEC\u4E0D\u4E00\u6837","\u767D\u591C","\u8FFD\u5149\u8005","\u674E\u8363\u6D69","\u8BB8\u5D69"]}},methods:{searchbarInit:function(a){this.searchbar=a},input:function(a){this.keywords=a,this.setStep(a?"suggest":"history"),clearTimeout(this.timer),this.$store.commit("search/clearSuggest"),this.timer=setTimeout(function(b){a&&b.$store.dispatch("search/getSuggest",{keywords:a})},500,this)},clear:function(){this.keywords="",this.$store.commit("search/clearSuggest")},setStep:function(a){this.step=a},cancel:function(){this.clear(),this.setStep("history")},removeHistory:function(a){this.$store.commit("search/setHistory",{keywords:a,remove:!0})},search:function(a,b){if(!this.keywords)return this.$tip.show("\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD"),!1;if(this.searchbar.$refs.search.value="",this.$store.commit("search/setHistory",{keywords:this.keywords}),a&&b){var c;1===a?c={name:"musicPlayer"}:10===a?c={name:"album"}:100===a?c={name:"artist"}:1e3===a?c={name:"playlist"}:void 0,c.query={id:b},this.$router.push(c)}else this.$store.commit("search/resetResult"),this.$store.dispatch("search/getResult",{keywords:this.keywords,type:1,limit:20}),this.setStep("result"),this.$store.dispatch("search/getMultiResult",{keywords:this.keywords}),this.clear()},quicksearch:function(a){a&&(this.keywords=a),this.search()},viewChange:function(a){this.currentView=this.tabs[a].en},back:function(){this.cancel(),this.$router.back()}},computed:Vuex.mapGetters("search",["suggest","history"]),components:{songs:function(a){c.e(10).then(function(){var b=[c("p04V")];a.apply(null,b)}.bind(this)).catch(c.oe)}}}},GSpQ:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c("AvgG"),e=c("hO69"),f=c("VU/8"),g=f(d.a,e.a,!1,null,null,null);b["default"]=g.exports},hO69:function(a,b){"use strict";b.a={render:function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("page",{staticClass:"search"},[c("toolbar",{attrs:{fixed:""}},[c("icon",{staticStyle:{"font-size":"26px",color:"#fff"},attrs:{ligature:"navigate_before"},nativeOn:{click:function(b){a.back(b)}}}),a._v(" "),c("toolbar-inner",[c("searchbar",{attrs:{placeholder:"\u641C\u7D22\u6B4C\u66F2\u3001\u6B4C\u624B\u3001\u4E13\u8F91"},on:{"searchbar:init":a.searchbarInit,"searchbar:submit":a.quicksearch,"searchbar:input":a.input,"searchbar:cancel":a.cancel}})],1),a._v(" "),c("span",{staticClass:"cancel",class:{hidden:"history"==a.step},on:{click:function(){a.setStep("history")}}},[a._v("\u53D6\u6D88")])],1),a._v(" "),c("div",{directives:[{name:"show",rawName:"v-show",value:"history"===a.step,expression:"step === 'history'"}]},[c("section",{staticClass:"hot-search"},[c("h3",[a._v("\u5927\u5BB6\u90FD\u5728\u641C")]),a._v(" "),c("div",a._l(a.tags,function(b,d){return c("span",{key:d,staticClass:"search-tag",on:{click:function(){a.quicksearch(b)}}},[a._v("\n          "+a._s(b)+"\n        ")])}))]),a._v(" "),c("section",{staticClass:"search-history"},[c("list",a._l(a.history,function(b,d){return c("list-item",{key:d},[c("icon",{staticClass:"icon-history",attrs:{ligature:"history"}}),a._v(" "),c("list-item-holder",{staticClass:"dense"},[c("list-item-inner",{nativeOn:{click:function(){a.quicksearch(b.keywords)}}},[c("span",[a._v(a._s(b.keywords))])]),a._v(" "),c("icon",{attrs:{ligature:"close"},nativeOn:{click:function(){a.removeHistory(b.keywords)}}})],1)],1)}))],1)]),a._v(" "),c("section",{directives:[{name:"show",rawName:"v-show",value:"suggest"===a.step,expression:"step === 'suggest'"}],staticClass:"search-suggest"},[c("list",[c("list-item",[c("list-item-holder",{staticClass:"dense",nativeOn:{click:function(){a.quicksearch()}}},[c("list-item-inner",[c("small",{staticClass:"type"},[a._v("\u641C\u7D22")]),a._v(a._s(a.keywords)+"\n          ")])],1)],1),a._v(" "),a._l(a.suggest,function(b){return c("list-item",{key:b.id},[c("list-item-holder",{staticClass:"dense",nativeOn:{click:function(){a.search(b.type,b.id)}}},[c("list-item-inner",[c("small",{staticClass:"type"},[a._v(a._s(b.alias))]),a._v(a._s(b.name)+a._s(b.artist?" - "+b.artist:"")+"\n          ")])],1)],1)})],2)],1),a._v(" "),c("section",{staticClass:"search-result",class:{hidden:"result"!==a.step}},[c("songs",{tag:"component"})],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=6.ae7a2ee1937385f25f39.js.map